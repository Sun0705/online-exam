!function(e){function t(s){if(a[s])return a[s].exports;var r=a[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t){function a(e,t){var a=e[1]||"",s=e[3];if(!s)return a;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(s),i=s.sources.map(function(e){return"/*# sourceURL="+s.sourceRoot+e+" */"});return[a].concat(i).concat([r]).join("\n")}return[a].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var s=a(t,e);return t[2]?"@media "+t[2]+"{"+s+"}":s}).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(s[i]=!0)}for(r=0;r<e.length;r++){var n=e[r];"number"==typeof n[0]&&s[n[0]]||(a&&!n[2]?n[2]=a:a&&(n[2]="("+n[2]+") and ("+a+")"),t.push(n))}},t}},function(e,t,a){function s(e){for(var t=0;t<e.length;t++){var a=e[t],s=c[a.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](a.parts[r]);for(;r<a.parts.length;r++)s.parts.push(i(a.parts[r]));s.parts.length>a.parts.length&&(s.parts.length=a.parts.length)}else{var n=[];for(r=0;r<a.parts.length;r++)n.push(i(a.parts[r]));c[a.id]={id:a.id,refs:1,parts:n}}}}function r(){var e=document.createElement("style");return e.type="text/css",p.appendChild(e),e}function i(e){var t,a,s=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(s){if(f)return m;s.parentNode.removeChild(s)}if(v){var i=d++;s=u||(u=r()),t=n.bind(null,s,i,!1),a=n.bind(null,s,i,!0)}else s=r(),t=function(e,t){var a=t.css,s=t.media,r=t.sourceMap;s&&e.setAttribute("media",s);r&&(a+="\n/*# sourceURL="+r.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}.bind(null,s),a=function(){s.parentNode.removeChild(s)};return t(e),function(s){if(s){if(s.css===e.css&&s.media===e.media&&s.sourceMap===e.sourceMap)return;t(e=s)}else a()}}function n(e,t,a,s){var r=a?"":s.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var i=document.createTextNode(r),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i)}}var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=a(14),c={},p=o&&(document.head||document.getElementsByTagName("head")[0]),u=null,d=0,f=!1,m=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,a){f=a;var r=l(e,t);return s(r),function(t){for(var a=[],i=0;i<r.length;i++){var n=r[i];(o=c[n.id]).refs--,a.push(o)}t?s(r=l(e,t)):r=[];for(i=0;i<a.length;i++){var o;if(0===(o=a[i]).refs){for(var p=0;p<o.parts.length;p++)o.parts[p]();delete c[o.id]}}}};var h=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,a,s,r,i){var n,o=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(n=e,o=e.default);var c="function"==typeof o?o.options:o;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),a&&(c.functional=!0),r&&(c._scopeId=r);var p;if(i?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=p):s&&(p=s),p){var u=c.functional,d=u?c.render:c.beforeCreate;u?(c._injectStyles=p,c.render=function(e,t){return p.call(t),d(e,t)}):c.beforeCreate=d?[].concat(d,p):[p]}return{esModule:n,exports:o,options:c}}},function(e,t){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t,a){"use strict";t.a={LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",REGISTER_SUCCESS:"REGISTER_SUCCESS",REGISTER_FAILED:"REGISTER_FAILED",LOGOUT:"LOGOUT",LOAD_USER_FROM_LOCAL:"LOAD_USER_FROM_LOCAL",SET_USER_INFO:"SET_USER_INFO",CLEAR_USER_INFO:"CLEAR_USER_INFO",SET_AUTH_INFO:"SET_AUTH_INFO",CLEAR_AUTH_INFO:"CLEAR_AUTH_INFO"}},function(e,t,a){var s=a(2)(a(27),a(28),!1,function(e){a(25)},"data-v-5aaf15a9",null);e.exports=s.exports},function(e,t,a){a(7),e.exports=a(69)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=a(8),s=a(10),r=a(64),i=a.n(r),n=a(4);axios.interceptors.response.use(function(e){return 401===e.status&&(app.$store.commit(n.a.CLEAR_USER_INFO),app.$store.commit(n.a.CLEAR_AUTH_INFO),app.$router.push({name:"login",query:{redirect:app.$route.fullPath}})),e},function(e){return 401===e.response.status&&(app.$store.commit(n.a.CLEAR_USER_INFO),app.$store.commit(n.a.CLEAR_AUTH_INFO),app.$router.push({name:"login",query:{redirect:app.$route.fullPath}})),Promise.reject(e)}),Vue.use(Vuex),Vue.use(VueRouter);var o=new VueRouter({routes:s.a});e.app=new Vue({el:"#app",store:t.a,router:o,template:"<App />",components:{App:i.a},beforeCreate:function(){var e=this;localStorage.token&&(axios.defaults.headers.common.Authorization="Bearer "+localStorage.token,localStorage.getItem("expires")-Date.now()<864e5?axios.post("api/auth/refresh",{token:localStorage.token}).then(function(e){var t=e.data;t.errors?(localStorage.removeItem("token"),o.push({path:"/login"})):(app.$store.commit(n.a.SET_AUTH_INFO,t),app.$store.commit(n.a.SET_USER_INFO,t.user),axios.defaults.headers.common.Authorization="Bearer "+t.token)}).catch(function(t){401===t.response.status&&e.$router.push({path:"login"})}):axios.get("/api/auth/me").then(function(e){var t=e.data;t.errors||(app.$store.commit(n.a.SET_AUTH_INFO,{token:localStorage.getItem("token"),expires:localStorage.getItem("expires")}),app.$store.commit(n.a.SET_USER_INFO,t))}))}}),Number.prototype.toHHMMSS=function(e){var t=e?this/1e3:this,a=Math.floor(t/3600),s=Math.floor((t-3600*a)/60),r=t-3600*a-60*s;return a<10&&(a="0"+a),s<10&&(s="0"+s),r<10&&(r="0"+r),a+":"+s+":"+r}}.call(t,a(3))},function(e,t,a){"use strict";var s=a(9);t.a=new Vuex.Store({modules:{user:s.a}})},function(e,t,a){"use strict";(function(e){function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r,i=a(4),n={login:function(t,a){var s=t.commit;return new Promise(function(){axios.post("/api/auth/login",a).then(function(t){var a=t.data;if(!a.errors){axios.defaults.headers.common.Authorization="Bearer "+a.token,s(i.a.SET_AUTH_INFO,a),s(i.a.SET_USER_INFO,a.user);var r=e.app.$route.query.redirect;r||(r="/papers"),app.$router.replace(r)}})})},register:function(t,a){var s=t.commit;return new Promise(function(){axios.post("/api/auth/register",a).then(function(t){var a=t.data;if(!a.errors){axios.defaults.headers.common.Authorization="Bearer "+a.token,s(i.a.SET_AUTH_INFO,a),s(i.a.SET_USER_INFO,a.user);var r=e.app.$route.query.redirect;r||(r="/papers"),app.$router.replace(r)}})})},logout:function(e){var t=e.commit;axios.get("/api/auth/logout").then(function(e){e.data.errors||(axios.defaults.headers.common.Authorization="",t(i.a.CLEAR_USER_INFO),t(i.a.CLEAR_AUTH_INFO),app.$router.push("/login"))})}},o=(r={},s(r,i.a.SET_AUTH_INFO,function(e,t){localStorage.setItem("token",t.token),localStorage.setItem("expires",Date.now()+1e3*t.expires_in),e.token=t.token,e.expires=Date.now()+1e3*t.expires_in}),s(r,i.a.SET_USER_INFO,function(e,t){e.email=t.email,e.avatar=t.avatar,e.name=t.name,e.id=t.id}),s(r,i.a.CLEAR_USER_INFO,function(e){e.email=null,e.avatar=null,e.name=null,e.id=null}),s(r,i.a.CLEAR_AUTH_INFO,function(e){localStorage.removeItem("token"),localStorage.removeItem("expires"),e.token=null,e.expires=null}),r);t.a={state:{token:null,expires:null,id:null,name:null,email:null,avatar:null},getters:{getToken:function(e){return e.token}},actions:n,mutations:o}}).call(t,a(3))},function(e,t,a){"use strict";function s(e,t,a){localStorage.token?a():a({name:"login",query:{redirect:e.fullPath}})}var r=a(11),i=a.n(r),n=a(19),o=a.n(n),l=a(30),c=a.n(l),p=a(35),u=a.n(p),d=a(45),f=a.n(d),m=a(50),v=a.n(m),h=[{path:"/",name:"mypapers",component:i.a,alias:"/papers",beforeEnter:s},{path:"/login",name:"login",component:o.a,alias:"/register"},{path:"/papers/:id/edit",name:"editPaper",component:u.a,beforeEnter:s},{path:"/papers/create",name:"createPaper",component:u.a,beforeEnter:s},{path:"/papers/:id",name:"paper",component:c.a,beforeEnter:s},{path:"/scores",name:"myscores",component:f.a,beforeEnter:s},{path:"/papers/:id/status",name:"examStatus",component:v.a,beforeEnter:s}];t.a=h},function(e,t,a){var s=a(2)(a(17),a(18),!1,function(e){a(12),a(15)},"data-v-4598f714",null);e.exports=s.exports},function(e,t,a){var s=a(13);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("9cfb928c",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".password-popper{text-align:center}",""])},function(e,t){e.exports=function(e,t){for(var a=[],s={},r=0;r<t.length;r++){var i=t[r],n=i[0],o={id:e+":"+r,css:i[1],media:i[2],sourceMap:i[3]};s[n]?s[n].parts.push(o):a.push(s[n]={id:n,parts:[o]})}return a}},function(e,t,a){var s=a(16);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("1a5cb1a7",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".dialog-content[data-v-4598f714],.dialog-content span[data-v-4598f714]{display:-webkit-box;display:-ms-flexbox;display:flex}.dialog-content span[data-v-4598f714]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:60px;font-size:16px}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{papers:null,loading:!1,showLinkDialog:!1,dialogLink:"",dialogTitle:""}},methods:{loadPapers:function(){var e=this;this.loading=!0,axios.get("/api/papers/my").then(function(t){e.loading=!1;var a=t.data;a.errors||(e.papers=a.papers.map(function(e,t){var a=JSON.parse(e.content);return _.assign({},e,{questions:a})}))})},removePaper:function(e){var t=this;console.log(e),axios.get("/api/papers/"+e.row.id+"/remove").then(function(a){a.data.errors||t.papers.splice(e.$index,1)})},getOpenText:function(e){return e.open_time&&new Date(e.open_time)>Date.now()?"未开始":"已开始"},handleLinkClick:function(e){this.dialogTitle=e.title,this.dialogLink=location.href+"papers/"+e.id,e.password&&(this.dialogLink+="?password="+e.password),this.showLinkDialog=!0}},created:function(){this.loadPapers()}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-link",{attrs:{to:{name:"createPaper"}}},[a("el-button",{attrs:{type:"primary"}},[e._v("添加新试卷")])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.showLinkDialog},on:{"update:visible":function(t){e.showLinkDialog=t}}},[a("div",{staticClass:"dialog-content"},[a("span",[e._v("链接")]),e._v(" "),a("el-input",{model:{value:e.dialogLink,callback:function(t){e.dialogLink=t},expression:"dialogLink"}})],1),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.dialogTitle))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showLinkDialog=!1}}},[e._v("关闭")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.papers}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"questions.length",label:"总题数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total_score",label:"总分",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time_limit",label:"限时",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"密码",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.password?a("el-popover",{attrs:{trigger:"click",placement:"top","popper-class":"password-popper"}},[e._v("\n          "+e._s(t.row.password)+"\n          "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看")])],1):a("span",[e._v("无")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"participation_count",label:"已参加人数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"开始时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.open_time?a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._v("\n          "+e._s(t.row.open_time)+"\n          "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(e.getOpenText(t.row)))])],1):a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("未设定")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operations",label:"操作",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleLinkClick(t.row)}}},[e._v("链接")]),e._v(" "),a("router-link",{attrs:{to:{name:"editPaper",params:{id:t.row.id}}}},[a("el-button",{attrs:{type:"text"}},[e._v("编辑")])],1),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.removePaper(t)}}},[e._v("删除")]),e._v(" "),a("router-link",{attrs:{to:{name:"examStatus",params:{id:t.row.id}}}},[a("el-button",{attrs:{type:"text"}},[e._v("统计")])],1)]}}])})],1)],1)},staticRenderFns:[]}},function(e,t,a){var s=a(2)(a(24),a(29),!1,function(e){a(20),a(22)},"data-v-4313993f",null);e.exports=s.exports},function(e,t,a){var s=a(21);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("61272c5e",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".el-tabs__item{font-size:17px}",""])},function(e,t,a){var s=a(23);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("22d65091",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".container[data-v-4313993f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.el-header[data-v-4313993f]{padding:0 10px}.login[data-v-4313993f]{margin-top:60px;padding:10px 20px;width:300px;border-radius:5px;-webkit-box-shadow:0 0 10px #ccc;box-shadow:0 0 10px #ccc}.form[data-v-4313993f]{margin-top:5px;margin-right:18px}.remember[data-v-4313993f],.service[data-v-4313993f]{margin:-18px 0 0}.operations[data-v-4313993f]{margin-left:65px}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(5),r=a.n(s);t.default={components:{Navbar:r.a},data:function(){var e=this,t={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的email地址",trigger:"blur"}],name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名至少3个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少6个字符",trigger:"blur"},{validator:function(t,a,s){e.register.passwordConfirm.length>0&&e.$refs.register.validateField("passwordConfirm")},trigger:"blur"}],passwordConfirm:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,a,s){a!==e.register.password?s(new Error("两次输入的密码不一致！")):s()},trigger:"blur"}]},a={email:t.email,password:[{required:!0,message:"请输入密码",trigger:"blur"}]},s=this.$route.path.endsWith("login")?"login":"register";return console.log(s),{loginRules:a,registerRules:t,login:{email:"",password:"",remember:!1},register:{name:"",email:"",password:"",passwordConfirm:"",service:!1},currentTab:this.$route.path.endsWith("login")?"login":"register"}},methods:{onLogin:function(){var e=this;this.$refs.login.validate(function(t){t&&e.$store.dispatch("login",e.login)})},onRegister:function(){var e=this;this.$refs.register.validate(function(t){t&&e.$store.dispatch("register",e.register)})}}}},function(e,t,a){var s=a(26);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("67e07830",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".container[data-v-5aaf15a9],.logo[data-v-5aaf15a9]{display:-webkit-box;display:-ms-flexbox;display:flex}.logo[data-v-5aaf15a9]{width:150px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:18px}.logo a[data-v-5aaf15a9]{color:#000!important;text-decoration:none}.right[data-v-5aaf15a9]{margin-left:auto;padding-right:10px}.right[data-v-5aaf15a9],.user-info[data-v-5aaf15a9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.user-info[data-v-5aaf15a9]{cursor:pointer}.user-info img[data-v-5aaf15a9]{width:36px;height:36px;border-radius:50%;margin-right:8px}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},r=Vuex.mapState;t.default={data:function(){var e=void 0;switch(this.$route.name){case"mypapers":e="papers";break;case"myscores":e="scores";break;default:e=null}return{defaultIndex:e}},watch:{$route:function(){var e=null;switch(this.$route.name){case"mypapers":e="papers";break;case"myscores":e="scores";break;default:e=null}this.defaultIndex=e}},computed:s({},r({token:function(e){return e.user.token},username:function(e){return e.user.name},avatar:function(e){return e.user.avatar}})),methods:{handleCommand:function(e){switch(console.log(e),e){case"logout":this.logout()}},logout:function(){console.log("caller"),this.$store.dispatch("logout")}}}},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"container navbar-inner",attrs:{"default-active":this.defaultIndex,mode:"horizontal",router:!0}},[t("div",{staticClass:"logo"},[t("router-link",{attrs:{to:"/"}},[this._v("在线考试系统")])],1),this._v(" "),t("el-menu-item",{attrs:{index:"papers",route:{name:"mypapers"}}},[this._v("我的试卷")]),this._v(" "),t("el-menu-item",{attrs:{index:"scores",route:{name:"myscores"}}},[this._v("我的成绩")]),this._v(" "),t("div",{staticClass:"right"},[[this.token?t("el-dropdown",{attrs:{size:"small"},on:{command:this.handleCommand}},[t("div",{staticClass:"user-info"},[t("img",{attrs:{src:this.avatar,alt:this.username}}),this._v(" "),t("span",[this._v(this._s(this.username))])]),this._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"logout"}},[this._v("退出登录")])],1)],1):t("div",[t("router-link",{attrs:{to:"/login"}},[t("el-button",{attrs:{type:"text",size:"large"}},[this._v("登录")])],1),this._v(" "),t("router-link",{attrs:{to:"/register"}},[t("el-button",{attrs:{type:"text",size:"large"}},[this._v("注册")])],1)],1)]],2)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"login"},[a("el-tabs",{attrs:{value:e.currentTab}},[a("el-tab-pane",{attrs:{label:"登录",name:"login"}},[a("el-form",{ref:"login",staticClass:"form",attrs:{"label-width":"65px",model:e.login,rules:e.loginRules}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.login.email,callback:function(t){e.$set(e.login,"email",t)},expression:"login.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1),e._v(" "),a("el-form-item",{staticClass:"remember",attrs:{label:"",prop:"remember"}},[a("el-checkbox",{model:{value:e.login.remember,callback:function(t){e.$set(e.login,"remember",t)},expression:"login.remember"}},[e._v("记住密码")])],1),e._v(" "),a("div",{staticClass:"operations",attrs:{prop:"remember"}},[a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onLogin}},[e._v("登录")])],1)])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"注册",name:"register"}},[a("el-form",{ref:"register",staticClass:"form",attrs:{"label-width":"65px",model:e.register,rules:e.registerRules}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.register.name,callback:function(t){e.$set(e.register,"name",t)},expression:"register.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.register.email,callback:function(t){e.$set(e.register,"email",t)},expression:"register.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.register.password,callback:function(t){e.$set(e.register,"password",t)},expression:"register.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重复",prop:"passwordConfirm"}},[a("el-input",{attrs:{type:"password"},model:{value:e.register.passwordConfirm,callback:function(t){e.$set(e.register,"passwordConfirm",t)},expression:"register.passwordConfirm"}})],1),e._v(" "),e._e(),e._v(" "),a("div",{staticClass:"operations"},[a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onRegister}},[e._v("注册")])],1)])],1)],1)],1)],1)])},staticRenderFns:[]}},function(e,t,a){var s=a(2)(a(33),a(34),!1,function(e){a(31)},"data-v-00f1550c",null);e.exports=s.exports},function(e,t,a){var s=a(32);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("c53ba646",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".container[data-v-00f1550c]{width:700px;margin:0 auto}.has-score[data-v-00f1550c]{text-align:center}.need-password[data-v-00f1550c]{margin-bottom:18px}.need-password p[data-v-00f1550c]{margin:6px 0}.wait-for-open p[data-v-00f1550c]{font-size:18px}.wait-for-open div[data-v-00f1550c]{font-size:26px}.start-test[data-v-00f1550c]{text-align:center}.paper[data-v-00f1550c]{width:100%}.paper-header[data-v-00f1550c]{text-align:center;margin:20px 0 14px}.paper-header .title[data-v-00f1550c]{font-size:28px}.paper-header .subtitle[data-v-00f1550c]{font-size:24px;margin-top:16px}.question .title[data-v-00f1550c]{font-size:16px;margin:12px 0}.submit[data-v-00f1550c]{margin-top:25px;text-align:center}.submit>[data-v-00f1550c]{width:120px;font-size:18px}label.el-checkbox[data-v-00f1550c],label.el-radio[data-v-00f1550c]{display:block;margin-left:0!important;line-height:16px}label.el-checkbox[data-v-00f1550c]:not(:first-child),label.el-radio[data-v-00f1550c]:not(:first-child){margin-top:10px}.answer-status[data-v-00f1550c]{position:fixed;right:40px;top:150px;width:260px}.answer-status .left-time[data-v-00f1550c]{float:right}.answer-status .numbers[data-v-00f1550c]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-left:-6px;margin-right:-6px}.answer-status span[data-v-00f1550c]{display:inline-block;width:32px;height:32px;line-height:32px;border:1px solid #979797;border-radius:50%;text-align:center;margin:6px}.answer-status span.done[data-v-00f1550c]{background-color:#409eff}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{paper:null,answers:null,boxStatus:null,scoreId:null,loadingPaper:!1,dialogTitle:null,dialogContent:null,onDialogConfirm:this.dismissDialog,dialogVisible:!1,autoSaveHandler:null,lastSaveAnswers:null,autoSaveInterval:5e3,deadline:null,leftTime:null,countDownHandler:null,checkingStatus:!1,testStatus:null,lastScore:null,password:"",passwordError:null,errorMessage:null,openTime:null}},methods:{checkTestStatus:function(){var e=this;this.checkingStatus=!0,axios.get("/api/papers/"+this.$route.params.id+"/check").then(function(t){e.checkingStatus=!1;var a=t.data;e.testStatus=a.errors,1===a.errors||2===a.errors?(e.$message.info("继续未完成的测试"),e.setupPaper(a)):3===a.errors?e.lastScore=a.score:5===a.errors?(e.openTime=new Date(a.open_time),e.startCountDown()):a.errors}).catch(function(t){console.log(t),e.$message.error("获取试卷内容时发生未知出错")})},startTest:function(){var e=this;this.loadingPaper||(4!==this.testStatus||""!==this.password?(this.loadingPaper=!0,axios.post("/api/papers/"+this.$route.params.id+"/start",{force:3===this.testStatus,password:4===this.testStatus?this.password:null}).then(function(t){var a=t.data;e.loadingPaper=!1,a.errors?1===a.errors?e.errorMessage="该测试不存在":2===a.errors?e.errorMessage="你已完成该测试":3===a.errors?e.errorMessage="密码错误":e.errorMessage="发生未知错误":(e.errorMessage=null,e.setupPaper(a))}).catch(function(t){console.error(t),e.$message.error("发生未知错误")})):this.errorMessage="请输入密码")},submit:function(){var e=this;this.stopAutoSave(),axios.post("/api/papers/submit/"+this.scoreId,{answers:this.answers}).then(function(t){e.stopCountDown();var a=t.data;if(a.errors){var s=null,r=function(){e.$router.push({name:"myscores"})};console.log(a),3===a.errors?s="你的成绩已出，本次提交无效，你的成绩为"+a.score+"分":2===a.errors?s="你的提交已超时，以服务器上最后保存的答案做评分，你上次的成绩为"+a.score+"分":(s="未知错误",r=null),e.showDialog("发生错误",s,r)}else e.showScoreDialog(a.score)}).catch(function(t){console.error(t),e.$message.error("发生未知错误")})},autoSave:function(){var e=this;this.hasAnswerChanged()&&axios.post("/api/papers/autoSave",{paper_id:this.paper.id,answers:this.answers}).then(function(t){var a=t.data;a.errors?(e.stopAutoSave(),console.error(a.errors)):e.lastSaveAnswers=_.cloneDeep(e.answers)})},initAnswers:function(e){var t=new Array(e.length);return e.forEach(function(e,a){"single"===e.type?t[a]=null:"multi"===e.type?t[a]=[]:"filling"===e.type&&(t[a]="")}),t},setupPaper:function(e){var t=this;this.scoreId=e.score_id,this.paper=e.paper,this.paper.questions=JSON.parse(e.paper.content),this.answers=e.answers?e.answers:this.initAnswers(this.paper.questions),this.boxStatus=this.answers.map(function(e){return t.isDone(e)}),this.deadline=new Date(e.deadline),this.lastSaveAnswers=_.cloneDeep(this.answers),e.continue&&this.$message({type:"success",message:"继续未完成的测试"}),this.startAutoSave(),this.startCountDown()},isDone:function(e){return Array.isArray(e)?e.length>0:!!e||0===e},onAnswerChange:function(e){this.$set(this.boxStatus,e,this.isDone(this.answers[e]))},dismissDialog:function(){this.dialogVisible=!1},showDialog:function(e,t,a){this.dialogTitle=e,this.dialogContent=t,this.onDialogConfirm="function"==typeof a?a:this.dismissDialog,this.dialogVisible=!0},showConfirmDialog:function(){var e=this.doneCount(),t=e===this.boxStatus.length?"已完成所有题目！":"部分题目尚未完成（"+e+"/"+this.boxStatus.length+"），是否确认提交？";this.showDialog("确认提交？",t,this.submit)},showScoreDialog:function(e){var t=this,a="您的分数为"+e+"分";this.showDialog("成绩",a,function(){t.$router.replace({name:"myscores"})})},doneCount:function(){for(var e=0,t=0;t<this.boxStatus.length;t++)this.boxStatus[t]&&e++;return e},startAutoSave:function(){null===this.autoSaveHandler&&setInterval(this.autoSave,this.autoSaveInterval)},stopAutoSave:function(){null!==this.autoSaveHandler&&(clearInterval(this.autoSave),this.autoSaveHandler=null)},hasAnswerChanged:function(){var e=this;return!_.every(this.lastSaveAnswers,function(t,a){var s=e.answers[a];return _.isArray(t)&&_.isArray(s)?t.length===s.length&&0===_.difference(t,s).length:t===s})},startCountDown:function(){null===this.countDownHandler&&(this.countDownHandler=setInterval(this.updateLeftTime,500))},stopCountDown:function(){null!==this.countDownHandler&&(clearInterval(this.countDownHandler),this.countDownHandler=null)},updateLeftTime:function(){var e=(this.paper?this.deadline:this.openTime)-new Date;e<0&&(e=0),!this.paper&&e<=0&&(this.startTest(),this.stopCountDown()),this.leftTime=this.beautifyTime(e)},beautifyTime:function(e){var t=Math.floor(e/1e3),a=Math.floor(t/3600),s=0;a>23&&(s=Math.floor(a/24),a%=24);var r=Math.floor((t-3600*(a+24*s))/60),i=t-3600*(a+24*s)-60*r;return(s>0?s+"天 ":"")+(a>9?a:"0"+a)+":"+(r>9?r:"0"+r)+":"+(i>9?i:"0"+i)}},beforeDestroy:function(){this.stopAutoSave(),this.stopCountDown()},mounted:function(){this.$route.query.password&&(this.password=this.$route.query.password),this.checkTestStatus()}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPaper,expression:"loadingPaper"}],staticClass:"container"},[e.paper?e._e():a("div",{staticClass:"start-test"},[e.errorMessage?a("el-alert",{attrs:{type:"error",title:e.errorMessage},on:{close:function(t){e.errorMessage=null}}}):e._e(),e._v(" "),e.checkingStatus?a("div",{staticClass:"checking-status"},[a("h3",[e._v("正在获取...")])]):[3===e.testStatus?a("div",{staticClass:"has-score"},[a("p",[e._v("你已经参加过此次测试，你的分数是 "),a("strong",[e._v(e._s(e.lastScore))]),e._v(" 分")]),e._v(" "),a("p",[e._v("是否重新测试？")])]):e._e(),e._v(" "),4===e.testStatus?a("div",{staticClass:"need-password"},[a("p",[e._v("该试卷需要密码才能访问")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e(),e._v(" "),5===e.testStatus?a("div",{staticClass:"wait-for-open"},[a("p",[e._v("测试尚未开启，请耐心等待...")]),e._v(" "),a("div",{staticClass:"count-down"},[e._v(e._s(e.leftTime))])]):e._e(),e._v(" "),6===e.testStatus?a("div",{staticClass:"times-limit"},[a("p",[e._v("你的参与次数已达上限，不能再参加此次考试！")])]):e._e(),e._v(" "),0===e.testStatus||3===e.testStatus||4===e.testStatus?a("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.startTest}},[e._v("开始测试")]):e._e()]],2),e._v(" "),e.paper?a("el-form",{ref:"form",staticClass:"paper"},[a("div",{staticClass:"paper-header"},[a("div",{staticClass:"title"},[e._v(e._s(e.paper.title))]),e._v(" "),a("div",{staticClass:"subtitle"},[e._v("总分："+e._s(e.paper.total_score)+" 限时："+e._s(e.paper.time_limit))])]),e._v(" "),a("div",{staticClass:"paper-content"},e._l(e.paper.questions,function(t,s){return a("div",{key:t.id,staticClass:"question",attrs:{id:"question"+s}},[a("div",{staticClass:"title"},[e._v(e._s(s+1)+". "+e._s(t.question)+"   ("+e._s(t.score)+"分)")]),e._v(" "),a("div",{staticClass:"options"},["multi"===t.type?a("el-checkbox-group",{model:{value:e.answers[s],callback:function(t){e.$set(e.answers,s,t)},expression:"answers[index]"}},e._l(t.options,function(t,r){return a("el-checkbox",{key:r,attrs:{label:r},on:{change:function(t){e.onAnswerChange(s)}}},[e._v(e._s(t)+"\n            ")])})):e._e(),e._v(" "),"single"===t.type?a("el-radio-group",{model:{value:e.answers[s],callback:function(t){e.$set(e.answers,s,t)},expression:"answers[index]"}},e._l(t.options,function(t,r){return a("el-radio",{key:r,attrs:{label:r},on:{change:function(t){e.onAnswerChange(s)}}},[e._v(e._s(t)+"\n            ")])})):e._e()],1)])})),e._v(" "),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.showConfirmDialog}},[e._v("提交")])],1)]):e._e(),e._v(" "),e.paper?a("el-card",{staticClass:"answer-status"},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      答题状态\n      "),a("div",{staticClass:"left-time"},[e._v(e._s(e.leftTime))])]),e._v(" "),a("div",{staticClass:"numbers"},e._l(e.boxStatus,function(t,s){return a("span",{class:{done:t}},[e._v("\n          "+e._s(s+1)+"\n      ")])}))]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogTitle?a("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.dialogTitle))]):e._e(),e._v(" "),a("div",[e._v(e._s(e.dialogContent))]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dismissDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onDialogConfirm}},[e._v("确定")])],1)])],1)},staticRenderFns:[]}},function(e,t,a){var s=a(2)(a(38),a(44),!1,function(e){a(36)},"data-v-543a4457",null);e.exports=s.exports},function(e,t,a){var s=a(37);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("91590086",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,"label.el-checkbox[data-v-543a4457],label.el-radio[data-v-543a4457]{display:block;margin-left:0!important;line-height:16px}label.el-checkbox[data-v-543a4457]:not(:first-child),label.el-radio[data-v-543a4457]:not(:first-child){margin-top:10px}.question[data-v-543a4457]{margin-bottom:16px}.create[data-v-543a4457]{margin-top:12px}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(39),r=a.n(s);t.default={data:function(){var e=this,t=function(e,t,a){/^[0-9]*[1-9][0-9]*$/.test(t)?a():a(new Error("请输入一个大于0的整数"))};return{rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],time_limit:[{required:!0,message:"请输入考试时长",trigger:"blur"},{validator:t,trigger:"blur"}],repeat_limit:[{required:!0,message:"请输入最多能重复考试的次数",trigger:"blur"},{validator:t,trigger:"blur"}],password:[{validator:function(t,a,s){e.paper.needPassword&&(a&&a.length>0?s():s(new Error("请输入密码")))},trigger:"blur"}],questions:[{validator:function(t,a,s){0===e.paper.questions.length?s(new Error("请输入至少一个题目")):s()},trigger:"submit"}],open_time:[{validator:function(t,a,s){e.paper.closeOnTime&&e.paper.openLater&&new Date(e.paper.closeTime)-new Date(e.paper.openTime)<=0&&s(new Error("结束时间应该迟于开始时间")),e.$refs.form.validateField("close_time")},trigger:"change"}],close_time:[{validator:function(t,a,s){e.paper.closeOnTime&&e.paper.openLater&&new Date(e.paper.closeTime)-new Date(e.paper.openTime)<=0&&s(new Error("结束时间应该迟于开始时间")),e.$refs.form.validateField("open_time")},trigger:"change"}]},paper:{needPassword:!1,password:"",title:"",openLater:!1,openTime:"",time_limit:60,questions:[],answers:[],repeat_limit:1,closeOnTime:!1,closeTime:""},addingQuestion:!1,loading:!1}},methods:{loadPaper:function(e){var t=this;this.loading=!0,axios.get("/api/papers/"+e+"/edit").then(function(e){t.loading=!1;var a=e.data;if(!a.errors){var s=a.paper;s.questions=JSON.parse(s.content);var r=JSON.parse(s.answers);s.questions.forEach(function(e,t){e.answer=r[t],e.title=e.question}),s.needPassword=!!s.password,s.openLater=!!s.open_time,s.openTime=s.open_time?new Date(s.open_time):"",s.closeOnTime=!!s.close_time,s.closeTime=s.close_time?new Date(s.close_time):"",t.paper=s}})},addQuestion:function(){this.addingQuestion=!0},onQuestionCancel:function(){this.addingQuestion=!1},onCreateQuestion:function(e){this.paper.questions.push(e),this.addingQuestion=!1,this.$refs.form.validateField("questions")},onSaveQuestion:function(e,t){this.$set(this.paper.questions,e,t)},onRemoveQuestion:function(e){this.paper.questions.splice(e,1)},onQuestionUp:function(e){if(0!==e){var t=this.paper.questions,a=t[e];this.$set(t,e,t[e-1]),this.$set(t,e-1,a)}},onQuestionDown:function(e){var t=this.paper.questions;if(e!==t.length-1){var a=t[e];this.$set(t,e,t[e+1]),this.$set(t,e+1,a)}},save:function(){var e=this,t=this.paper.id?"/api/papers/"+this.paper.id+"/update":"/api/papers/store",a=[];this.$refs.form.validate(function(s){if(s){var r=e.paper.questions.map(function(e){return a.push(e.answer),{question:e.title,type:e.type,score:e.score,options:e.options}});axios.post(t,{title:e.paper.title,time_limit:e.paper.time_limit,need_password:e.paper.needPassword,password:e.paper.needPassword?e.paper.password:void 0,open_later:e.paper.openLater,open_time:e.paper.openLater?e.paper.openTime:void 0,repeat_limit:e.paper.repeat_limit,close_on_time:e.paper.closeOnTime,close_time:e.paper.closeOnTime?e.paper.closeTime:void 0,questions:r,answers:a}).then(function(t){t.data.errors?e.$message({message:e.paper.id?"保存失败":"创建失败",type:"error"}):e.$message({message:e.paper.id?"保存成功":"创建成功",type:"success"})})}})}},created:function(){if("editPaper"===this.$route.name){var e=this.$route.params.id;this.loadPaper(e)}},watch:{$route:function(e){if(this.addingQuestion=!1,"createPaper"===this.$route.name)this.paper={title:"",time_limit:60,questions:[],answers:[]};else if("editPaper"===this.$route.name){var t=/papers\/(\d+)\/edit/.exec(e.path)[1];this.loadPaper(t)}}},components:{question:r.a}}},function(e,t,a){var s=a(2)(a(42),a(43),!1,function(e){a(40)},"data-v-42c63076",null);e.exports=s.exports},function(e,t,a){var s=a(41);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("f978304c",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".normal[data-v-42c63076]{padding:8px;border-radius:8px;border:1px solid transparent}.normal[data-v-42c63076]:hover{border-color:#409eff;-webkit-box-shadow:0 0 15px #409eff;box-shadow:0 0 15px #409eff}label.el-checkbox[data-v-42c63076],label.el-radio[data-v-42c63076]{display:block;margin-left:0!important;line-height:20px}.editor label.el-checkbox[data-v-42c63076],.editor label.el-radio[data-v-42c63076]{display:inline-block;line-height:25px}label.el-checkbox[data-v-42c63076]:not(:first-child),label.el-radio[data-v-42c63076]:not(:first-child){margin-top:10px}.operations[data-v-42c63076]{display:inline-block;font-size:15px;line-height:25px;float:right}.operations i[data-v-42c63076]{margin-left:6px}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{question:Object,answer:[Number,Array],edit:Boolean,id:Number},data:function(){var e=this,t=[],a={multi:[],single:null};this.question&&(t=this.question.options.map(function(e,t){return{value:e,editing:!1,tempText:null}}),a[this.question.type]=this.question.answer);return{form:{title:this.question?this.question.title:"",type:this.question?this.question.type:"single",score:this.question?this.question.score:5,options:t,answer:a},rules:{title:[{required:!0,message:"请输入题目",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],score:[{required:!0,message:"请输入分数",trigger:"blur"},{validator:function(e,t,a){/^[0-9]*[1-9][0-9]*$/.test(t)?a():a(new Error("请输入一个大于0的整数"))},trigger:"blur"}],options:[{validator:function(t,a,s){if(0!==e.form.options.length){var r=e.form.type,i=e.form.answer;"single"===r&&"number"!=typeof i.single||"multi"===r&&0===i.multi.length?s(new Error("请选择答案")):s()}else s(new Error("请提供答案选项"))},trigger:"submit"}]},typeOptions:{single:"单选题",multi:"多选题"},tempOption:null,editing:this.edit}},methods:{addOption:function(){this.tempOption&&0!==this.tempOption.length&&(this.form.options.push({value:this.tempOption,editing:!1}),this.tempOption="")},removeOption:function(e){this.form.options.splice(e,1);var t=this.form.answer.multi,a=t.indexOf(e);if(a>=0){t.splice(a,1);for(var s=0;s<t.length;s++){var r=t[s];r>e&&(t[s]=r-1)}}this.form.answer.single===e?this.form.answer.single=null:this.form.answer.single>e&&this.form.answer.single--},editOption:function(e){var t=this.form.options[e];t.editing=!0,t.tempText=t.value},saveOption:function(e){e.editing=!1,e.value=e.tempText},optionUp:function(e){if(!(e<=0)){var t=this.form.options,a=this.form.answer.multi,s=t[e];this.$set(t,e,t[e-1]),this.$set(t,e-1,s);var r=a.indexOf(e-1),i=a.indexOf(e);i>=0&&r<0?this.$set(a,i,e-1):i<0&&r>=0&&this.$set(a,r,e),this.form.answer.single===e?this.form.answer.single=e-1:this.form.answer.single===e-1&&(this.form.answer.single=e)}},optionDown:function(e){if(!(e>=this.form.options.length-1)){var t=this.form.options,a=this.form.answer.multi,s=t[e];this.$set(t,e,t[e+1]),this.$set(t,e+1,s);var r=a.indexOf(e),i=a.indexOf(e+1);i>=0&&r<0?this.$set(a,i,e):i<0&&r>=0&&this.$set(a,r,e+1),this.form.answer.single===e?this.form.answer.single=e+1:this.form.answer.single===e+1&&(this.form.answer.single=e)}},save:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error"),!1;e.question?(e.$emit("save",e.id,{title:e.form.title,type:e.form.type,score:e.form.score,options:e.form.options.map(function(e){return e.value}),answer:e.form.answer[e.form.type]}),e.editing=!1):(e.$emit("create",{title:e.form.title,type:e.form.type,score:e.form.score,options:e.form.options.map(function(e){return e.value}),answer:e.form.answer[e.form.type]}),e.reset())})},cancel:function(){"number"==typeof this.id?this.editing=!1:(this.reset(),this.$emit("cancel"))},reset:function(){this.form={title:"",type:"single",score:5,options:[],answer:{single:null,multi:[]}},this.tempOption=""},questionUp:function(){this.$emit("up",this.id)},questionDown:function(){this.$emit("down",this.id)},editQuestion:function(){this.editing=!0},removeQuestion:function(){this.$emit("remove",this.id)}},watch:{question:function(e){this.form={title:e.title,type:e.type,score:e.score,options:e.options.map(function(e){return{value:e,editing:!1,tempText:null}}),answer:{single:"single"===e.type?e.answer:null,multi:"multi"===e.type?e.answer:[]}}},edit:function(e){this.editing=e}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.editing?e._e():a("div",{staticClass:"normal"},[a("div",{staticClass:"operations"},[a("i",{staticClass:"el-icon-arrow-up",on:{click:e.questionUp}}),e._v(" "),a("i",{staticClass:"el-icon-arrow-down",on:{click:e.questionDown}}),e._v(" "),a("i",{staticClass:"el-icon-edit",on:{click:e.editQuestion}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:e.removeQuestion}})]),e._v(" "),a("p",[e._v(e._s(e.id+1)+". "+e._s(e.question.title)+" ("+e._s(e.question.score)+"分)")]),e._v(" "),"single"===e.question.type?a("el-radio-group",{model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}},e._l(e.question.options,function(t,s){return a("el-radio",{key:s,attrs:{name:"radio"+e.id,label:s,disabled:""}},[e._v("\n                "+e._s(t)+"\n            ")])})):e._e(),e._v(" "),"multi"===e.question.type?a("el-checkbox-group",{model:{value:e.question.answer,callback:function(t){e.$set(e.question,"answer",t)},expression:"question.answer"}},e._l(e.question.options,function(t,s){return a("el-checkbox",{key:s,attrs:{name:"checkbox"+e.id,label:s,disabled:""}},[e._v("\n                "+e._s(t)+"\n            ")])})):e._e()],1),e._v(" "),e.editing?a("el-card",{staticClass:"editor"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules,size:"small"}},[a("el-form-item",{attrs:{label:"题目",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择题目类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"单选题",value:"single"}}),e._v(" "),a("el-option",{attrs:{label:"多选题",value:"multi"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分数",prop:"score"}},[a("el-input",{model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选项",prop:"options"}},[e.form.options.length>0&&"multi"===e.form.type?a("el-checkbox-group",{staticStyle:{width:"100%"},model:{value:e.form.answer.multi,callback:function(t){e.$set(e.form.answer,"multi",t)},expression:"form.answer.multi"}},e._l(e.form.options,function(t,s){return a("div",{key:t.value},[a("el-checkbox",{attrs:{name:"single",label:s}},[e._v(e._s(t.value))]),e._v(" "),a("div",{staticClass:"operations"},[a("i",{staticClass:"el-icon-arrow-up",on:{click:function(t){e.optionUp(s)}}}),e._v(" "),a("i",{staticClass:"el-icon-arrow-down",on:{click:function(t){e.optionDown(s)}}}),e._v(" "),a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.editOption(s)}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(t){e.removeOption(s)}}})]),e._v(" "),t.editing?a("div",[a("el-input",{model:{value:t.tempText,callback:function(a){e.$set(t,"tempText",a)},expression:"item.tempText"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"6px"},attrs:{type:"primary",size:"small"},on:{click:e.saveOption}},[e._v("保存")])],1):e._e()],1)})):e._e(),e._v(" "),e.form.options.length>0&&"single"===e.form.type?a("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.form.answer.single,callback:function(t){e.$set(e.form.answer,"single",t)},expression:"form.answer.single"}},e._l(e.form.options,function(t,s){return a("div",{key:t.value},[a("el-radio",{attrs:{label:s,name:"multi"}},[e._v(e._s(t.value))]),e._v(" "),a("div",{staticClass:"operations"},[a("i",{staticClass:"el-icon-arrow-up",on:{click:function(t){e.optionUp(s)}}}),e._v(" "),a("i",{staticClass:"el-icon-arrow-down",on:{click:function(t){e.optionDown(s)}}}),e._v(" "),t.editing?e._e():a("i",{staticClass:"el-icon-edit",on:{click:function(t){e.editOption(s)}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(t){e.removeOption(s)}}})]),e._v(" "),t.editing?a("div",[a("el-input",{model:{value:t.tempText,callback:function(a){e.$set(t,"tempText",a)},expression:"item.tempText"}}),e._v(" "),a("el-button",{staticStyle:{margin:"6px 0"},attrs:{type:"primary",size:"small"},on:{click:e.saveOption}},[e._v("保存")])],1):e._e()],1)})):e._e(),e._v(" "),a("el-input",{attrs:{placeholder:"新选项"},model:{value:e.tempOption,callback:function(t){e.tempOption=t},expression:"tempOption"}}),e._v(" "),a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:e.addOption}},[e._v("添加")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{offset:20,span:4}},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)],1):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"80px",model:e.paper,rules:e.rules}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.paper.title,callback:function(t){e.$set(e.paper,"title",t)},expression:"paper.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"时间",prop:"time_limit"}},[a("el-input",{model:{value:e.paper.time_limit,callback:function(t){e.$set(e.paper,"time_limit",t)},expression:"paper.time_limit"}},[a("template",{slot:"append"},[e._v("分钟")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"重考次数",prop:"repeat_limit"}},[a("el-input",{model:{value:e.paper.repeat_limit,callback:function(t){e.$set(e.paper,"repeat_limit",e._n(t))},expression:"paper.repeat_limit"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:""}},[a("el-checkbox",{model:{value:e.paper.needPassword,callback:function(t){e.$set(e.paper,"needPassword",t)},expression:"paper.needPassword"}},[e._v("是否需要密码")])],1),e._v(" "),e.paper.needPassword?a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.paper.password,callback:function(t){e.$set(e.paper,"password",t)},expression:"paper.password"}})],1):e._e(),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:""}},[a("el-checkbox",{model:{value:e.paper.openLater,callback:function(t){e.$set(e.paper,"openLater",t)},expression:"paper.openLater"}},[e._v("是否延时开启")])],1),e._v(" "),e.paper.openLater?a("el-form-item",{attrs:{label:"开始时间",prop:"open_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择日期时间"},model:{value:e.paper.openTime,callback:function(t){e.$set(e.paper,"openTime",t)},expression:"paper.openTime"}})],1):e._e(),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"8px"},attrs:{label:""}},[a("el-checkbox",{model:{value:e.paper.closeOnTime,callback:function(t){e.$set(e.paper,"closeOnTime",t)},expression:"paper.closeOnTime"}},[e._v("是否定时关闭")])],1),e._v(" "),e.paper.closeOnTime?a("el-form-item",{attrs:{label:"结束时间",prop:"close_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择日期时间"},model:{value:e.paper.closeTime,callback:function(t){e.$set(e.paper,"closeTime",t)},expression:"paper.closeTime"}})],1):e._e(),e._v(" "),a("div",[e._l(e.paper.questions,function(t,s){return a("div",{key:s,staticClass:"question"},[a("question",{attrs:{question:t,id:s},on:{save:e.onSaveQuestion,remove:e.onRemoveQuestion,up:e.onQuestionUp,down:e.onQuestionDown}})],1)}),e._v(" "),e.addingQuestion?a("question",{attrs:{edit:!0},on:{create:e.onCreateQuestion,cancel:e.onQuestionCancel}}):e._e(),e._v(" "),a("el-form-item",{attrs:{prop:"questions"}},[a("el-button",{staticClass:"create",attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.addQuestion}},[e._v("添加新题目")])],1)],2),e._v(" "),a("hr"),e._v(" "),a("el-row",[a("el-col",{attrs:{span:4,offset:10}},[a("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.save}},[e._v("保存试卷")])],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t,a){var s=a(2)(a(48),a(49),!1,function(e){a(46)},"data-v-a34ff09e",null);e.exports=s.exports},function(e,t,a){var s=a(47);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("2c8c2752",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,"",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{data:null,loading:!1}},methods:{loadScores:function(){var e=this;this.loading=!0,axios.get("/api/papers/myscores").then(function(t){e.loading=!1;var a=t.data;if(!a.errors){var s=a.scores;s.map(function(e){e.complete_time?e.spend_time=Math.ceil((new Date(e.complete_time)-new Date(e.start_time))/6e4)+"分钟":e.spend_time=null}),e.data=s}})}},mounted:function(){this.loadScores()}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.data}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"分数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total_score",label:"总分",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"start_time",label:"开始时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"用时",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.spend_time?a("span",[e._v(e._s(t.row.spend_time))]):a("span",[e._v("\n        尚未完成\n        "),a("router-link",{attrs:{to:{name:"paper",params:{id:t.row.paper_id}}}},[a("el-button",{attrs:{type:"text"}},[e._v("继续")])],1)],1)]}}])})],1)},staticRenderFns:[]}},function(e,t,a){var s=a(2)(a(53),a(63),!1,function(e){a(51)},"data-v-3dc0f39f",null);e.exports=s.exports},function(e,t,a){var s=a(52);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("4a889324",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".badges[data-v-3dc0f39f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:80px;padding:20px 40px}.badges .score .left[data-v-3dc0f39f]{background-color:#409eff}.badges .person .left[data-v-3dc0f39f]{background-color:#67c23a}.badges .time .left[data-v-3dc0f39f]{background-color:#e6a23c}.badges .card[data-v-3dc0f39f]{display:-webkit-box;display:-ms-flexbox;display:flex;border:1px solid #d7d7d7;border-radius:6px;overflow:hidden;width:240px;height:80px}.badges .card[data-v-3dc0f39f]:hover{-webkit-box-shadow:0 0 5px 6px hsla(0,0%,94%,.7);box-shadow:0 0 5px 6px hsla(0,0%,94%,.7)}.badges .card .left[data-v-3dc0f39f]{display:-webkit-box;display:-ms-flexbox;display:flex;height:80px;width:80px;border-right:#d7d7d7;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.badges .card .left i[data-v-3dc0f39f]{font-size:30px;color:#fff}.badges .card .right[data-v-3dc0f39f]{padding:5px 9px;width:160px}.badges .label[data-v-3dc0f39f]{font-size:14px}.badges .data[data-v-3dc0f39f]{font-size:22px;text-align:right}.badges .sub[data-v-3dc0f39f]{font-size:12px;text-align:right}.charts[data-v-3dc0f39f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.charts>[data-v-3dc0f39f]:first-child{margin-right:30px}.charts .chart>[data-v-3dc0f39f]:nth-child(2){display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.title[data-v-3dc0f39f]{font-size:18px}.range-buttons[data-v-3dc0f39f]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(54),r=a.n(s),i=a(59),n=a.n(i),o=a(61),l=a.n(o);t.default={components:{scoreChart:n.a,questionChart:l.a,answerSheet:r.a},data:function(){return{scores:null,paper:null,loading:!1,scoreIndex:null,showAnswerDialog:!1,totalCount:null,averageScore:null,averageTime:null,passCount:null,accuracies:null,accuracyOption:{responsive:!1,scales:{yAxes:[{ticks:{min:0,max:100,callback:function(e){return e+"%"}}}],xAxes:[{barPercentage:1}]},legend:{display:!1},tooltips:{callbacks:{title:function(e){return"题目 "+e[0].xLabel},label:function(e){return"正确率："+e.yLabel+"%"}}}},scoreChartOption:{responsive:!1,legend:{display:!1},scales:{yAxes:[{ticks:{min:0}}],xAxes:[{barPercentage:1}]},tooltips:{callbacks:{title:function(e){return"分数："+e[0].xLabel}}}},chartRangeLength:25,accuracyRangeIndex:0,accuracyRangeButtons:null,scoreChartData:null,scoreRangeIndex:0,scoreRangeButtons:null}},methods:{loadScores:function(){var e=this;this.loading=!0,axios.get("/api/papers/"+this.$route.params.id+"/status").then(function(t){var a=t.data;e.scores=a.scores,e.paper=a.paper,e.paper.answers=JSON.parse(e.paper.answers),e.paper.questions=JSON.parse(e.paper.content),e.scores.forEach(function(e){return e.answers=JSON.parse(e.answers)}),e.analyze()}).catch(function(t){console.error(t);var a=null;a=403===t.response.status?"无权访问此试卷信息":"载入信息时发生未知错误",e.$message.error(a)}).finally(function(){e.loading=!1})},handleAnswerClick:function(e){this.scoreIndex=e,this.showAnswerDialog=!0},handleRemoveClick:function(e){var t=this;axios.get("/api/scores/"+this.scores[e].id+"/remove").then(function(a){a.data.errors||(t.$message.success("删除成功"),t.scores.splice(e,1))})},analyze:function(){var e=this,t=0,a=0,s=0,r=new Array(this.paper.questions.length);_.fill(r,0),this.scores.forEach(function(i){t+=i.score,i.costTime=Math.floor((new Date(i.complete_time)-new Date(i.start_time))/1e3),a+=i.costTime,i.score>=60&&s++,i.answers.forEach(function(t,a){var s=e.paper.answers[a],i=e.paper.questions[a].type,n=!1;"single"===i?n=s===t:"multi"===i&&(n=s.length===t.length&&0===_.difference(s,t).length),n&&r[a]++})}),this.totalCount=this.scores.length,this.averageScore=t/this.totalCount,this.averageTime=Math.ceil(a/this.totalCount),this.passCount=s,this.accuracies=r.map(function(t){return(t/e.totalCount*100).toFixed(2)});for(var i=[],n=0;n<this.paper.questions.length;n+=this.chartRangeLength){var o=this.chartRangeLength+n;o>this.paper.questions.length&&(o=this.paper.questions.length),i.push(n+1+" - "+o)}this.accuracyRangeButtons=i;var l=new Array(Math.ceil(this.paper.total_score/10));_.fill(l,0),this.scores.forEach(function(e){var t=Math.floor(e.score/10);l[t]++}),this.scoreChartData=l;var c=[];this.scoreRangeIndex=null;for(var p=0;p<Math.ceil(this.paper.total_score/100);p++){var u=100*(p+1);u>this.paper.total_score&&(u=this.paper.total_score);for(var d=0,f=10*p;f<10*(p+1)&&!(f>=l.length);f++)d+=l[f];c.push({range:100*p+" - "+(100*(p+1)-1),count:d}),null===this.scoreRangeIndex&&d>0&&(this.scoreRangeIndex=p)}this.scoreRangeButtons=c}},mounted:function(){this.loadScores()},computed:{chartData:function(){if(!this.scores)return null;for(var e=[],t=100*this.scoreRangeIndex,a=0;a<10;a++){var s=t+10*(a+1)-1;if(e.push(t+10*a+" - "+s),s>=this.paper.total_score)break}return{labels:e,datasets:[{label:"人数",fillColor:"#409eff",strokeColor:"#rgba(220, 220, 220, 1)",barStrokeWidth:1,data:_.slice(this.scoreChartData,10*this.scoreRangeIndex,10*(this.scoreRangeIndex+1))}]}},accuracyData:function(){if(!this.paper)return null;var e=null;if(this.paper.questions.length<=this.chartRangeLength)e=_.range(1,this.paper.questions.length+1,1);else{var t=this.chartRangeLength*(this.accuracyRangeIndex+1);t>this.paper.questions.length&&(t=this.paper.questions.length),e=_.range(this.chartRangeLength*this.accuracyRangeIndex+1,t+1,1)}return{labels:e,datasets:[{label:"正确率",fillColor:"#409eff",strokeColor:"#rgba(220, 220, 220, 1)",data:_.slice(this.accuracies,e[0]-1,e[e.length-1])}]}},tableData:function(){return null===this.scores?null:this.scores.map(function(e){return{id:e.id,username:e.user.name,score:e.score,time:(new Date(e.complete_time)-new Date(e.start_time)).toHHMMSS(!0),complete_time:e.complete_time}})},dialogTitle:function(){if(null===this.scoreIndex)return null;var e=this.scores[this.scoreIndex];return e.user.name+" —— 分数："+e.score}}}},function(e,t,a){var s=a(2)(a(57),a(58),!1,function(e){a(55)},"data-v-1ed4fe51",null);e.exports=s.exports},function(e,t,a){var s=a(56);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("20e4cc76",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".container[data-v-1ed4fe51]{margin-top:-20px}.answer-option[data-v-1ed4fe51]{display:-webkit-box;display:-ms-flexbox;display:flex}.judge[data-v-1ed4fe51]{margin-top:10px;font-size:16px;width:25px}.judge.el-icon-check[data-v-1ed4fe51]{color:#67c23a}.judge.el-icon-close[data-v-1ed4fe51]{color:#f56c6c}label.el-checkbox[data-v-1ed4fe51],label.el-radio[data-v-1ed4fe51]{display:block;margin-left:0!important;line-height:16px}label.el-checkbox[data-v-1ed4fe51]:not(:first-child),label.el-radio[data-v-1ed4fe51]:not(:first-child){margin-top:10px}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{answers:Array,paper:{questions:Array,answers:Array}},data:function(){return{}},methods:{isRightAnswer:function(e,t){var a=this.paper.answers[e],s=this.paper.questions[e].type;if("multi"===s){var r=-1!==this.answers[e].indexOf(t);return-1!==a.indexOf(t)?"right":r?"wrong":"none"}if("single"===s)return a===t?"right":this.answers[e]===t?"wrong":"none"}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},e._l(e.paper.questions,function(t,s){return a("div",{staticClass:"answer"},[a("div",{staticClass:"title"},[e._v(e._s(s+1)+". "+e._s(t.question)+"   ("+e._s(t.score)+"分)")]),e._v(" "),"multi"===t.type?a("el-checkbox-group",{attrs:{value:e.answers[s]}},e._l(t.options,function(t,r){return a("div",{staticClass:"answer-option checkbox"},[a("i",{staticClass:"judge",class:{"el-icon-check":"right"===e.isRightAnswer(s,r),"el-icon-close":"wrong"===e.isRightAnswer(s,r)}}),e._v(" "),a("el-checkbox",{key:r,attrs:{label:r}},[e._v(e._s(t))])],1)})):e._e(),e._v(" "),"single"===t.type?a("el-radio-group",{attrs:{value:e.answers[s]}},e._l(t.options,function(t,r){return a("div",{staticClass:"answer-option radio"},[a("i",{staticClass:"judge",class:{"el-icon-check":"right"===e.isRightAnswer(s,r),"el-icon-close":"wrong"===e.isRightAnswer(s,r)}}),e._v(" "),a("el-radio",{key:r,attrs:{label:r}},[e._v(e._s(t))])],1)})):e._e()],1)}))},staticRenderFns:[]}},function(e,t,a){var s=a(2)(a(60),null,!1,null,null,null);e.exports=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=VueChartJs,r=s.Bar,i=s.mixins.reactiveProp;t.default={extends:r,mixins:[i],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}}},function(e,t,a){var s=a(2)(a(62),null,!1,null,null,null);e.exports=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=VueChartJs,r=s.Bar,i=s.mixins.reactiveProp;t.default={extends:r,mixins:[i],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.paper?a("div",{staticClass:"title"},[e._v(e._s(e.paper.title))]):e._e(),e._v(" "),e.paper?a("div",{staticClass:"analysis"},[a("div",{staticClass:"badges"},[a("div",{staticClass:"card score"},[e._m(0),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"label"},[e._v("平均分数")]),e._v(" "),a("div",{staticClass:"data"},[e._v(e._s(e.averageScore.toFixed(2)))]),e._v(" "),a("div",{staticClass:"sub"},[e._v("总分："+e._s(e.paper.total_score))])])]),e._v(" "),a("div",{staticClass:"card person"},[e._m(1),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"label"},[e._v("及格人数")]),e._v(" "),a("div",{staticClass:"data"},[e._v(e._s(e.passCount))]),e._v(" "),a("div",{staticClass:"sub"},[e._v("参与人数："+e._s(e.totalCount))])])]),e._v(" "),a("div",{staticClass:"card time"},[e._m(2),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"label"},[e._v("平均用时")]),e._v(" "),a("div",{staticClass:"data"},[e._v(e._s(e.averageTime.toHHMMSS()))]),e._v(" "),a("div",{staticClass:"sub"},[e._v("限时："+e._s((60*e.paper.time_limit).toHHMMSS()))])])])]),e._v(" "),a("div",{staticClass:"charts"},[a("div",{staticClass:"chart"},[a("p",[e._v("分数统计：")]),e._v(" "),a("score-chart",{attrs:{"chart-data":e.chartData,options:e.scoreChartOption,width:500,height:350}}),e._v(" "),e.paper.total_score>100?a("div",{staticClass:"range-buttons"},e._l(e.scoreRangeButtons,function(t,s){return a("el-button",{key:t.range,attrs:{size:"small",type:e.scoreRangeIndex===s?"primary":"default",disabled:0===t.count},on:{click:function(t){e.scoreRangeIndex=s}}},[e._v("\n            "+e._s(t.range+" ("+t.count+")")+"\n          ")])})):e._e()],1),e._v(" "),a("div",{staticClass:"chart"},[a("p",[e._v("正确率统计：")]),e._v(" "),a("score-chart",{attrs:{"chart-data":e.accuracyData,options:e.accuracyOption,width:500,height:350}}),e._v(" "),e.paper.questions.length>e.chartRangeLength?a("div",{staticClass:"range-buttons"},e._l(e.accuracyRangeButtons,function(t,s){return a("el-button",{key:t,attrs:{size:"small",type:e.accuracyRangeIndex===s?"primary":"default"},on:{click:function(t){e.accuracyRangeIndex=s}}},[e._v("\n            "+e._s(t)+"\n          ")])})):e._e()],1)])]):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"分数",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"用时",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"complete_time",label:"完成时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"operations",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleAnswerClick(t.$index)}}},[e._v("查看答案")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleRemoveClick(t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.showAnswerDialog,title:e.dialogTitle,top:"20px"},on:{"update:visible":function(t){e.showAnswerDialog=t}}},[null!==e.scoreIndex?a("answer-sheet",{attrs:{paper:e.paper,answers:e.scores[e.scoreIndex].answers}}):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAnswerDialog=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-document"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-star-on"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-time"})])}]}},function(e,t,a){var s=a(2)(a(67),a(68),!1,function(e){a(65)},"data-v-05546136",null);e.exports=s.exports},function(e,t,a){var s=a(66);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1)("4d2d67c8",s,!0)},function(e,t,a){(e.exports=a(0)(void 0)).push([e.i,".container[data-v-05546136]{font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,\\\\5FAE\\8F6F\\96C5\\9ED1,Arial,sans-serif}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(5),r=a.n(s);t.default={components:{Navbar:r.a},data:function(){return{}}}},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",[t("navbar")],1),this._v(" "),t("el-main",[t("router-view")],1)],1)},staticRenderFns:[]}},function(e,t){}]);